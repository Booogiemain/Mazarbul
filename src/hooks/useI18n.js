import { useState, useEffect } from "react";

// DICIONÁRIO COMPLETO, INCLUINDO AS NOVAS CHAVES
const I18N = {
  PT: {
    "a11y.open_search": "Abrir busca",
    "search.placeholder": "Busca rápida...",
    "section.achievements": "Conquistas",
    "section.favorites": "Favoritos",
    "section.reviews": "Reviews recentes",
    "section.highlights": "Destaques",
    "section.recents": "Recentes",
    "section.clubs": "Clubes",
    "section.friends": "Atividade dos Amigos",
    "section.synopsis": "Sinopse",
    "section.techDetails": "Ficha Técnica",
    "section.yourReview": "Sua Review",
    "section.communityAverage": "Média da Comunidade",
    "section.communityReviews": "Reviews da Comunidade",
    "action.explore": "Explorar",
    "action.see_more": "Ver mais",
    "action.saveReview": "Salvar Review",
    "filter.all": "Todos",
    "filter.movies": "Filmes",
    "filter.books": "Livros",
    "filter.games": "Jogos",
    "filter.albums": "Álbuns",
    "form.placeholder.review": "Escreva sua review...",
    "badge.filme": "Filme",
    "badge.livro": "Livro",
    "badge.jogo": "Jogo",
    "badge.album": "Álbum",
    "label.next": "Próximo",
    "details.director": "Diretor",
    "details.duration": "Duração",
    "details.genre": "Gênero",
    "details.year": "Ano",
    "details.country": "País",
    "tag.scifi": "Sci-Fi",
    "tag.aventura": "Aventura",
    "tag.drama": "Drama",
    "tag.thriller": "Thriller",
    "tag.comedia": "Comédia",
    "tag.distopia": "Distopia",
    "tag.politica": "Política",
    "tag.roguelike": "Roguelike",
    "tag.mitologia": "Mitologia",
    "tag.indie": "Indie",
    "tag.eletronica": "Eletrônica",
    "tag.disco": "Disco",
    "tag.funk": "Funk",
    "tag.rpg": "RPG",
    "tag.fantasia": "Fantasia",
    "tag.estrategia": "Estratégia",
    "tag.epica": "Épica",
    "tag.hiphop": "Hip-Hop",
    "tag.jazz": "Jazz",
    "tag.criticasocial": "Crítica Social",
    "tag.biografia": "Biografia",
    "tag.historia": "História",
    "tag.noir": "Noir",
    "tag.rock": "Rock",
    "tag.conceitual": "Conceitual",
    "tag.ciberpunk": "Ciberpunk",
    "tag.alternativo": "Alternativo",
    "badge.52books": "52 livros em 2024",
    "badge.12games": "12 jogos em 2024",
    "badge.clubreader": "Leitura coletiva de clube",
    "badge.52films": "52 filmes em 2024",
    "badge.topreviewer": "Top 1% resenhistas",
  },
  EN: {
    "a11y.open_search": "Open search",
    "search.placeholder": "Quick search...",
    "section.achievements": "Achievements",
    "section.favorites": "Favorites",
    "section.reviews": "Recent reviews",
    "section.highlights": "Highlights",
    "section.recents": "Recents",
    "section.clubs": "Clubs",
    "section.friends": "Friends Activity",
    "section.synopsis": "Synopsis",
    "section.techDetails": "Technical Details",
    "section.yourReview": "Your Review",
    "section.communityAverage": "Community Average",
    "section.communityReviews": "Community Reviews",
    "action.explore": "Explore",
    "action.see_more": "See more",
    "action.saveReview": "Save Review",
    "filter.all": "All",
    "filter.movies": "Movies",
    "filter.books": "Books",
    "filter.games": "Games",
    "filter.albums": "Albums",
    "form.placeholder.review": "Write your review...",
    "badge.filme": "Movie",
    "badge.livro": "Book",
    "badge.jogo": "Game",
    "badge.album": "Album",
    "label.next": "Next",
    "details.director": "Director",
    "details.duration": "Duration",
    "details.genre": "Genre",
    "details.year": "Year",
    "details.country": "Country",
    "tag.scifi": "Sci-Fi",
    "tag.aventura": "Adventure",
    "tag.drama": "Drama",
    "tag.thriller": "Thriller",
    "tag.comedia": "Comedy",
    "tag.distopia": "Dystopian",
    "tag.politica": "Politics",
    "tag.roguelike": "Roguelike",
    "tag.mitologia": "Mythology",
    "tag.indie": "Indie",
    "tag.eletronica": "Electronic",
    "tag.disco": "Disco",
    "tag.funk": "Funk",
    "tag.rpg": "RPG",
    "tag.fantasia": "Fantasy",
    "tag.estrategia": "Strategy",
    "tag.epica": "Epic",
    "tag.hiphop": "Hip-Hop",
    "tag.jazz": "Jazz",
    "tag.criticasocial": "Social Commentary",
    "tag.biografia": "Biography",
    "tag.historia": "History",
    "tag.noir": "Noir",
    "tag.rock": "Rock",
    "tag.conceitual": "Conceptual",
    "tag.ciberpunk": "Cyberpunk",
    "tag.alternativo": "Alternative",
    "badge.52books": "52 books in 2024",
    "badge.12games": "12 games in 2024",
    "badge.clubreader": "Book club collective reading",
    "badge.52films": "52 films in 2024",
    "badge.topreviewer": "Top 1% reviewer",
  },
  ES: {
    "a11y.open_search": "Abrir búsqueda",
    "search.placeholder": "Búsqueda rápida...",
    "section.achievements": "Logros",
    "section.favorites": "Favoritos",
    "section.reviews": "Reseñas recientes",
    "section.highlights": "Destacados",
    "section.recents": "Recientes",
    "section.clubs": "Clubes",
    "section.friends": "Actividad de Amigos",
    "section.synopsis": "Sinopsis",
    "section.techDetails": "Ficha Técnica",
    "section.yourReview": "Tu Reseña",
    "section.communityAverage": "Promedio de la Comunidad",
    "section.communityReviews": "Reseñas de la Comunidad",
    "action.explore": "Explorar",
    "action.see_more": "Ver más",
    "action.saveReview": "Guardar Reseña",
    "filter.all": "Todos",
    "filter.movies": "Películas",
    "filter.books": "Libros",
    "filter.games": "Juegos",
    "filter.albums": "Álbumes",
    "form.placeholder.review": "Escribe tu reseña...",
    "badge.filme": "Película",
    "badge.livro": "Libro",
    "badge.jogo": "Juego",
    "badge.album": "Álbum",
    "label.next": "Próximo",
    "details.director": "Director",
    "details.duration": "Duración",
    "details.genre": "Género",
    "details.year": "Año",
    "details.country": "País",
    "tag.scifi": "Ciencia-Ficción",
    "tag.aventura": "Aventura",
    "tag.drama": "Drama",
    "tag.thriller": "Suspense",
    "tag.comedia": "Comedia",
    "tag.distopia": "Distopía",
    "tag.politica": "Política",
    "tag.roguelike": "Roguelike",
    "tag.mitologia": "Mitología",
    "tag.indie": "Indie",
    "tag.eletronica": "Electrónica",
    "tag.disco": "Disco",
    "tag.funk": "Funk",
    "tag.rpg": "RPG",
    "tag.fantasia": "Fantasía",
    "tag.estrategia": "Estrategia",
    "tag.epica": "Épica",
    "tag.hiphop": "Hip-Hop",
    "tag.jazz": "Jazz",
    "tag.criticasocial": "Crítica Social",
    "tag.biografia": "Biografía",
    "tag.historia": "Historia",
    "tag.noir": "Noir",
    "tag.rock": "Rock",
    "tag.conceitual": "Conceptual",
    "tag.ciberpunk": "Ciberpunk",
    "tag.alternativo": "Alternativo",
    "badge.52books": "52 libros en 2024",
    "badge.12games": "12 juegos en 2024",
    "badge.clubreader": "Lectura colectiva de club",
    "badge.52films": "52 películas en 2024",
    "badge.topreviewer": "Top 1% reseñadores",
  },
};

export function useI18n() {
  const [lang, setLang] = useState(() => {
    if (typeof window === "undefined") return "PT";
    const saved = localStorage.getItem("lang_v1");
    if (saved === "PT" || saved === "EN" || saved === "ES") return saved;
    return "PT";
  });

  useEffect(() => {
    try {
      localStorage.setItem("lang_v1", lang);
    } catch (e) {
      console.error("Failed to save lang to localStorage", e);
    }
  }, [lang]);

  const t = (key) => {
    return (I18N[lang] && I18N[lang][key]) || I18N.PT[key] || key;
  };

  return { lang, setLang, t };
}
